<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title layout:title-pattern="$CONTENT_TITLE - Instagram Clone">Instagram Clone</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <style>
        :root {
            --instagram-blue: #0095f6;
            --instagram-dark-gray: #262626;
            --instagram-gray: #8e8e8e;
            --instagram-light-gray: #fafafa;
            --instagram-border: #dbdbdb;
        }

        body {
            background-color: var(--instagram-light-gray);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        /* 네비게이션 바 스타일 */
        .navbar-custom {
            background-color: white;
            border-bottom: 1px solid var(--instagram-border);
            padding: 8px 0;
        }

        .navbar-brand {
            font-size: 1.75rem;
            font-weight: bold;
            color: var(--instagram-dark-gray) !important;
            text-decoration: none;
        }

        .navbar-brand:hover {
            color: var(--instagram-dark-gray) !important;
        }

        .nav-link {
            color: var(--instagram-dark-gray) !important;
            font-size: 1.5rem;
            padding: 8px 16px !important;
            border-radius: 8px;
            transition: background-color 0.2s;
        }

        .nav-link:hover {
            background-color: var(--instagram-light-gray);
            color: var(--instagram-dark-gray) !important;
        }

        /* 검색바 스타일 */
        .search-container {
            position: relative;
            max-width: 268px;
        }

        .search-input {
            background-color: var(--instagram-light-gray);
            border: 1px solid var(--instagram-border);
            border-radius: 8px;
            padding: 8px 16px 8px 40px;
            font-size: 14px;
            width: 100%;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--instagram-gray);
            box-shadow: none;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--instagram-gray);
            font-size: 14px;
        }

        /* 메인 컨텐츠 */
        .main-content {
            max-width: 470px;
            margin: 20px auto;
            padding: 0 20px;
        }

        /* 카드 스타일 */
        .post-card {
            background: white;
            border: 1px solid var(--instagram-border);
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .post-header {
            padding: 16px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid var(--instagram-border);
        }

        .profile-image {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            margin-right: 12px;
        }

        .username {
            font-weight: 600;
            color: var(--instagram-dark-gray);
            font-size: 14px;
        }

        .post-image {
            width: 100%;
            max-height: 600px;
            object-fit: cover;
        }

        .post-actions {
            padding: 8px 16px;
        }

        .action-btn {
            background: none;
            border: none;
            font-size: 24px;
            margin-right: 16px;
            color: var(--instagram-dark-gray);
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .action-btn:hover {
            opacity: 0.5;
        }

        .post-caption {
            padding: 0 16px 16px;
            font-size: 14px;
            line-height: 18px;
        }

        .post-time {
            padding: 0 16px 16px;
            font-size: 10px;
            color: var(--instagram-gray);
            text-transform: uppercase;
        }

        /* 버튼 스타일 */
        .btn-instagram {
            background-color: var(--instagram-blue);
            border: none;
            color: white;
            padding: 8px 24px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            text-decoration: none;
            display: inline-block;
            transition: background-color 0.2s;
        }

        .btn-instagram:hover {
            background-color: #0080d6;
            color: white;
        }

        /* 폼 스타일 */
        .form-control {
            border: 1px solid var(--instagram-border);
            border-radius: 3px;
            padding: 8px 16px;
            font-size: 14px;
        }

        .form-control:focus {
            border-color: var(--instagram-gray);
            box-shadow: none;
        }

        /* 프로필 스타일 */
        .profile-info {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .profile-image-large {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin-right: 30px;
        }

        .profile-stats {
            display: flex;
            gap: 40px;
            margin-bottom: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-count {
            font-size: 18px;
            font-weight: 600;
            color: var(--instagram-dark-gray);
        }

        .stat-label {
            font-size: 14px;
            color: var(--instagram-gray);
        }

        /* 반응형 */
        @media (max-width: 768px) {
            .main-content {
                max-width: 100%;
                padding: 0;
            }

            .post-card {
                border-radius: 0;
                border-left: none;
                border-right: none;
                margin-bottom: 8px;
            }

            .search-container {
                display: none;
            }

            .profile-image-large {
                width: 80px;
                height: 80px;
                margin-right: 20px;
            }

            .profile-stats {
                gap: 20px;
            }
        }

        /* 로딩 스타일 */
        .loading {
            text-align: center;
            padding: 20px;
            color: var(--instagram-gray);
        }

        /* 빈 상태 스타일 */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--instagram-gray);
        }

        .empty-state i {
            font-size: 60px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
<!-- 네비게이션 바 -->
<nav class="navbar navbar-expand-lg navbar-custom">
    <div class="container">
        <!-- 로고 -->
        <a class="navbar-brand" href="/posts/feed">
            <i class="fab fa-instagram"></i> Instagram
        </a>

        <!-- 검색바 (데스크톱용) -->
        <div class="search-container d-none d-md-block">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="form-control search-input" placeholder="검색">
        </div>

        <!-- 네비게이션 메뉴 -->
        <div class="navbar-nav ms-auto d-flex flex-row">
            <a class="nav-link" href="/posts/feed" title="홈">
                <i class="fas fa-home"></i>
            </a>
            <a class="nav-link d-none d-md-block" href="/posts/new" title="만들기">
                <i class="fas fa-plus-square"></i>
            </a>
            <a class="nav-link" href="/users/profile" title="프로필">
                <i class="fas fa-user"></i>
            </a>
            <a class="nav-link d-none d-md-block" href="/auth/logout" title="로그아웃">
                <i class="fas fa-sign-out-alt"></i>
            </a>
        </div>
    </div>
</nav>

<!-- 메인 콘텐츠 -->
<div class="main-content">
    <div layout:fragment="content">
        <!-- 각 페이지 내용이 여기에 삽입됨 -->
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- 커스텀 JS -->
<script>
    // 좋아요 토글 기능
    function toggleLike(postId) {
        const likeBtn = document.querySelector(`#like-btn-${postId}`);
        const likeCount = document.querySelector(`#like-count-${postId}`);

        if (likeBtn.classList.contains('liked')) {
            likeBtn.classList.remove('liked');
            likeBtn.innerHTML = '<i class="far fa-heart"></i>';
            // TODO: 서버로 좋아요 취소 요청
        } else {
            likeBtn.classList.add('liked');
            likeBtn.innerHTML = '<i class="fas fa-heart" style="color: #ed4956;"></i>';
            // TODO: 서버로 좋아요 요청
        }
    }

    // 이미지 프리뷰 기능
    function previewImage(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('image-preview').src = e.target.result;
                document.getElementById('preview-container').style.display = 'block';
            }
            reader.readAsDataURL(input.files[0]);
        }
    }

    // 폼 유효성 검사
    function validatePostForm() {
        const content = document.getElementById('content').value;
        const imageFile = document.getElementById('imageFile').files[0];

        if (!content.trim() && !imageFile) {
            alert('내용을 입력하거나 이미지를 선택해주세요.');
            return false;
        }

        return true;
    }
</script>
</body>
</html>