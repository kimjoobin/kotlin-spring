<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main}">
<head>
  <title>피드</title>
</head>

<div layout:fragment="content">
  <!-- 게시글이 있는 경우 -->
  <div th:if="${not #lists.isEmpty(posts)}">
    <div th:each="post : ${posts}" class="post-card fade-in">
      <!-- 게시글 헤더 -->
      <div class="post-header">
        <img th:src="${post.user.profileImage != null ? post.user.profileImage : '/images/default-profile.png'}"
             alt="프로필 이미지" class="profile-image">
        <div>
          <div class="username" th:text="${post.user.username}">username</div>
        </div>
      </div>

      <!-- 게시글 이미지 -->
      <div th:if="${post.imageUrl}">
        <img th:src="${post.imageUrl}" alt="게시글 이미지" class="post-image">
      </div>

      <!-- 게시글 내용 -->
      <div class="post-caption">
        <span style="font-weight: 600;" th:text="${post.user.username}">username</span>
        <span th:text="${post.caption}">게시글 내용이 여기에 표시됩니다...</span>
      </div>

      <!-- 게시 시간 -->
      <div class="post-time" th:text="${#temporals.format(post.createdAt, 'yyyy년 M월 d일')}">
        1일 전
      </div>
    </div>
  </div>

  <!-- 게시글이 없는 경우 -->
  <div th:if="${#lists.isEmpty(posts)}" class="empty-state">
    <i class="fas fa-camera"></i>
    <h4>아직 게시물이 없습니다</h4>
    <p>첫 번째 게시물을 만들어보세요!</p>
    <a href="/posts/new" class="btn-instagram">첫 게시물 만들기</a>
  </div>

  <!-- 더 보기 버튼 -->
  <div th:if="${hasNext}" class="text-center mt-4 mb-4">
    <a th:href="'/posts/feed?page=' + ${currentPage + 1}" class="btn btn-outline-secondary">
      더 많은 게시물 보기
    </a>
  </div>
</div>
</html>