<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main}">
<head>
    <title>프로필</title>
</head>

<div layout:fragment="content">
    <div style="max-width: 935px; margin: 0 auto; padding: 20px;">

        <!-- 프로필 헤더 -->
        <div class="profile-info">
            <!-- 프로필 이미지 -->
            <div class="text-center">
                <img th:src="${user.profileImage != null ? user.profileImage : '/images/default-profile.png'}"
                     alt="프로필 이미지" class="profile-image-large">
            </div>

            <!-- 프로필 정보 -->
            <div class="flex-grow-1">
                <!-- 사용자명과 버튼들 -->
                <div class="d-flex align-items-center mb-3">
                    <h2 style="font-weight: 300; margin-right: 20px;" th:text="${user.username}">username</h2>

                    <!-- 본인 프로필인 경우 -->
                    <div th:if="${isOwnProfile}">
                        <a href="/users/edit" class="btn btn-outline-secondary">프로필 편집</a>
                    </div>
                </div>

                <!-- 통계 -->
                <div class="profile-stats">
                    <div class="stat-item">
                        <div class="stat-count" th:text="${#numbers.formatInteger(user.postCount, 0)}">0</div>
                        <div class="stat-label">게시물</div>
                    </div>
                </div>

                <!-- 사용자 정보 -->
                <div>
                    <div style="font-weight: 600; margin-bottom: 8px;" th:text="${user.name}">이름</div>
                    <div th:if="${user.bio}" style="line-height: 1.5;" th:text="${user.bio}">
                        자기소개가 여기에 표시됩니다.
                    </div>
                </div>
            </div>
        </div>

        <hr style="margin: 40px 0; border-color: var(--instagram-border);">

        <!-- 게시물 그리드 -->
        <div>
            <!-- 게시물이 있는 경우 -->
            <div th:if="${not #lists.isEmpty(posts)}" class="row g-1">
                <div th:each="post : ${posts}" class="col-4">
                    <div class="position-relative" style="aspect-ratio: 1; overflow: hidden;">
                        <img th:src="${post.imageUrl}" alt="게시물"
                             class="w-100 h-100" style="object-fit: cover;">
                    </div>
                </div>
            </div>

            <!-- 게시물이 없는 경우 -->
            <div th:if="${#lists.isEmpty(posts)}" class="empty-state">
                <div style="border: 2px solid var(--instagram-dark-gray); border-radius: 50%; width: 60px; height: 60px;
                           display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                    <i class="fas fa-camera" style="font-size: 24px;"></i>
                </div>
                <h4>사진 공유</h4>
                <p>사진을 공유하면 프로필에 표시됩니다.</p>
                <div th:if="${isOwnProfile}">
                    <a href="/posts/new" class="text-instagram-blue fw-bold" style="text-decoration: none;">
                        첫 번째 사진 공유하기
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
</html>